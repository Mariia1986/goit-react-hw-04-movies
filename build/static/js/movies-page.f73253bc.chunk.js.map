{"version":3,"sources":["api/api.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/SearchingFilms/SearchingFilms.module.css","pages/MoviesPage/MoviesPage.module.css","components/SearchingFilms/SearchingFilms.js","pages/MoviesPage/MoviesPage.js"],"names":["key","baseUrl","api","getTrendFilms","fetch","then","res","json","results","getMovieInfo","id","getSearchMovies","query","length","Promise","reject","getFilmActors","cast","getRewiesFilm","_defineProperty","obj","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","module","exports","withRouter","films","match","location","className","s","searchList","map","name","original_title","searchListItem","to","pathname","path","state","from","navLink","MoviesPage","movies","error","getSearchbyQuery","setState","catch","handleChange","e","hendleSubmit","preventDefault","props","history","toLowerCase","search","this","slice","searchFormContainer","searchForm","onSubmit","type","searchFormbutton","searchFormbuttonlabel","searchForminput","placeholder","onChange","fallback","render","errorMessage","Component"],"mappings":"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","file":"static/js/movies-page.f73253bc.chunk.js","sourcesContent":["const key = '0758483bbf141f2377e75ad4723d5ab5';\r\nconst baseUrl = 'https://api.themoviedb.org/3/';\r\n\r\nconst getTrendFilms = () => {\r\n  return fetch(`${baseUrl}trending/movie/week?api_key=${key}`)\r\n    .then(res => {\r\n      return res.json();\r\n    })\r\n    .then(({ results }) => {\r\n      return results;\r\n    });\r\n};\r\n\r\nconst getMovieInfo = id => {\r\n  return fetch(`${baseUrl}movie/${id}?api_key=${key}`).then(res => {\r\n    return res.json();\r\n  });\r\n};\r\n\r\nconst getSearchMovies = query => {\r\n  return fetch(`${baseUrl}search/movie?query=${query}&api_key=${key}`)\r\n    .then(res => {\r\n      return res.json();\r\n    })\r\n    .then(({ results }) => {\r\n      if (results.length === 0) {\r\n        return Promise.reject(`Nothing found for your request: ${query}`);\r\n      }\r\n      return results;\r\n    });\r\n};\r\n\r\nconst getFilmActors = id => {\r\n  return fetch(`${baseUrl}movie/${id}/credits?api_key=${key}`)\r\n    .then(res => {\r\n      return res.json();\r\n    })\r\n    .then(({ cast }) => {\r\n      return cast;\r\n    });\r\n};\r\n\r\nconst getRewiesFilm = id => {\r\n  return fetch(`${baseUrl}movie/${id}/reviews?api_key=${key}`)\r\n    .then(res => {\r\n      return res.json();\r\n    })\r\n    .then(({ results }) => {\r\n      if (results.length === 0) {\r\n        return Promise.reject('No reviews for this film');\r\n      }\r\n      return results;\r\n    });\r\n};\r\n\r\nconst api = {\r\n  getTrendFilms,\r\n  getMovieInfo,\r\n  getSearchMovies,\r\n  getFilmActors,\r\n  getRewiesFilm,\r\n};\r\n\r\nexport default api;\r\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchList\":\"SearchingFilms_searchList__2KXCB\",\"searchListItem\":\"SearchingFilms_searchListItem__3CVC7\",\"navLink\":\"SearchingFilms_navLink__3cTi9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"MoviesPage_searchForm__3WChD\",\"searchFormbutton\":\"MoviesPage_searchFormbutton__3tg21\",\"searchForm-button\":\"MoviesPage_searchForm-button__2FSi9\",\"searchFormbuttonlabel\":\"MoviesPage_searchFormbuttonlabel__3aBb-\",\"searchForminput\":\"MoviesPage_searchForminput__3AIDj\",\"searchForm-input\":\"MoviesPage_searchForm-input__3IEJE\",\"searchFormContainer\":\"MoviesPage_searchFormContainer__1rMHo\",\"errorMessage\":\"MoviesPage_errorMessage__xo4q1\"};","import React from \"react\"\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport s from \"./SearchingFilms.module.css\"\r\n\r\nconst SerchingFilms=({films, match, location})=>{\r\n\r\n\r\n\r\n    return(\r\n        <ul className={s.searchList}>\r\n            {films && films.map(({name, id, original_title }) => (\r\n          <li  key={id} className={s.searchListItem}>\r\n            <NavLink\r\n              to={{\r\n                pathname: `${match.path}/${id}`,\r\n                state: { from: location },\r\n              }}\r\n              className={s.navLink}\r\n            >\r\n           {name || original_title}\r\n            </NavLink>\r\n          </li>\r\n        ))}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default withRouter(SerchingFilms)\r\n\r\nSerchingFilms.propTypes={\r\n \r\n    films: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        id: PropTypes.number.isRequired,\r\n        name: PropTypes.string,\r\n        original_title: PropTypes.string,\r\n      }),\r\n    ),\r\n\r\n}","import React, { Component, Suspense } from 'react';\r\nimport api from '../../api/api';\r\nimport { Route } from 'react-router-dom';\r\nimport SerchingFilms from '../../components/SearchingFilms';\r\nimport Loading from '../../components/Loader';\r\nimport s from './MoviesPage.module.css';\r\n\r\nconst { getSearchMovies } = api;\r\n\r\nclass MoviesPage extends Component {\r\n  state = {\r\n    query: '',\r\n    movies: [],\r\n    error: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    // console.log(this.props.location.search);\r\n    if (this.props.location.search) {\r\n      this.getSearchbyQuery(this.props.location.search.slice(7));\r\n    } \r\n    \r\n  }\r\n\r\n  getSearchbyQuery = query => {\r\n    getSearchMovies(query)\r\n      .then(movies => {\r\n        this.setState({ movies });\r\n      })\r\n      .catch(error => {\r\n        this.setState({ error });\r\n      });\r\n  };\r\n\r\n  // componentDidUpdate(prevProps, prevState) {\r\n  //   const { query } = this.state;\r\n  //   if (prevState.query !== query) {\r\n  //     this.getSearchbyQuery(query);\r\n  //   }\r\n  // }\r\n\r\n  handleChange = e => {\r\n    this.setState({ query: e.target.value });\r\n  };\r\n\r\n  hendleSubmit = e => {\r\n    e.preventDefault();\r\n    const { history, location } = this.props;\r\n\r\n    this.getSearchbyQuery(this.state.query.toLowerCase());\r\n\r\n    history.push({ ...location, search: `query=${this.state.query}` });\r\n    this.state.query = '';\r\n  };\r\n\r\n  render() {\r\n    const { movies, query, error } = this.state;\r\n    return (\r\n      <div>\r\n        <div className={s.searchFormContainer}>\r\n          <form className={s.searchForm} onSubmit={this.hendleSubmit}>\r\n            <button type=\"submit\" className={s.searchFormbutton}>\r\n              <span className={s.searchFormbuttonlabel}>Search</span>\r\n            </button>\r\n\r\n            <input\r\n              className={s.searchForminput}\r\n              type=\"text\"\r\n              placeholder=\"Search movies..\"\r\n              value={query}\r\n              onChange={this.handleChange}\r\n            />\r\n          </form>\r\n        </div>\r\n        <div>\r\n          {\r\n            <Suspense\r\n              fallback={\r\n                <div className=\"loaderContainer\">\r\n                  <Loading />\r\n                </div>\r\n              }\r\n            >\r\n              <Route\r\n                to={`/movies/query=${query}`}\r\n                render={props => <SerchingFilms films={movies} {...props} />}\r\n              />\r\n            </Suspense>\r\n          }\r\n\r\n          {error && <h2 className={s.errorMessage}>{error}</h2>}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MoviesPage;\r\n"],"sourceRoot":""}